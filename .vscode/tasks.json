{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Build Debug (Linux)",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"cmake -S . -B build/debug -G Ninja -DCMAKE_CXX_COMPILER=/usr/lib/llvm-21/bin/clang++ -DCMAKE_CXX_STANDARD=23 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake/Qt6 -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld -DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld && cmake --build build/debug"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Build RelWithDebInfo (Linux)",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"cmake -S . -B build/relwithdebinfo -G Ninja -DCMAKE_CXX_COMPILER=/usr/lib/llvm-21/bin/clang++ -DCMAKE_CXX_STANDARD=23 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake/Qt6 -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld -DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld && cmake --build build/relwithdebinfo"
			],
			"group": "build",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Build Release (Linux)",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"cmake -S . -B build/release -G Ninja -DCMAKE_CXX_COMPILER=/usr/lib/llvm-21/bin/clang++ -DCMAKE_CXX_STANDARD=23 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake/Qt6 -DCMAKE_BUILD_TYPE=Release -DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld -DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld && cmake --build build/release"
			],
			"group": "build",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Build Optimized (Linux)",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"cmake -S . -B build/optimized -G Ninja -DCMAKE_CXX_COMPILER=/usr/lib/llvm-21/bin/clang++ -DCMAKE_CXX_STANDARD=23 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake/Qt6 -DCMAKE_BUILD_TYPE=Release -DGNOTE_ENABLE_IPO=ON -DCMAKE_INTERPROCEDURAL_OPTIMIZATION=ON -DCMAKE_EXE_LINKER_FLAGS='-fuse-ld=lld' -DCMAKE_SHARED_LINKER_FLAGS='-fuse-ld=lld' -DCMAKE_EXE_LINKER_FLAGS_RELEASE='-s' -DCMAKE_SHARED_LINKER_FLAGS_RELEASE='-s' -DCMAKE_CXX_FLAGS_RELEASE='-O3 -DNDEBUG -march=x86-64-v3 -fomit-frame-pointer' && cmake --build build/optimized"
			],
			"group": "build",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Configure Debug (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"-S",
				".",
				"-B",
				"build/win-debug",
				"-G",
				"Ninja",
				"-DCMAKE_CXX_COMPILER=${env:LLVM_ROOT}/bin/clang++.exe",
				"-DCMAKE_CXX_STANDARD=23",
				"-DCMAKE_CXX_STANDARD_REQUIRED=ON",
				"-DCMAKE_CXX_EXTENSIONS=OFF",
				"-DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
				"-DCMAKE_TOOLCHAIN_FILE=${env:VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
				"-DQt6_DIR=${env:Qt6_DIR}",
				"-DCMAKE_PREFIX_PATH=${env:QT6_PREFIX_PATH}",
				"-DCMAKE_BUILD_TYPE=Debug",
				"-DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld",
				"-DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld"
			],
			"group": "build",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Build Debug (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"build/win-debug"
			],
			"dependsOn": "Configure Debug (Windows)",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared"
			}
		},
		{
			"label": "Configure RelWithDebInfo (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"-S",
				".",
				"-B",
				"build/win-relwithdebinfo",
				"-G",
				"Ninja",
				"-DCMAKE_CXX_COMPILER=${env:LLVM_ROOT}/bin/clang++.exe",
				"-DCMAKE_CXX_STANDARD=23",
				"-DCMAKE_CXX_STANDARD_REQUIRED=ON",
				"-DCMAKE_CXX_EXTENSIONS=OFF",
				"-DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
				"-DCMAKE_TOOLCHAIN_FILE=${env:VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
				"-DQt6_DIR=${env:Qt6_DIR}",
				"-DCMAKE_PREFIX_PATH=${env:QT6_PREFIX_PATH}",
				"-DCMAKE_BUILD_TYPE=RelWithDebInfo",
				"-DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld",
				"-DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld"
			],
			"group": "build",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Build RelWithDebInfo (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"build/win-relwithdebinfo"
			],
			"dependsOn": "Configure RelWithDebInfo (Windows)",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared"
			}
		},
		{
			"label": "Configure Release (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"-S",
				".",
				"-B",
				"build/win-release",
				"-G",
				"Ninja",
				"-DCMAKE_CXX_COMPILER=${env:LLVM_ROOT}/bin/clang++.exe",
				"-DCMAKE_CXX_STANDARD=23",
				"-DCMAKE_CXX_STANDARD_REQUIRED=ON",
				"-DCMAKE_CXX_EXTENSIONS=OFF",
				"-DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
				"-DCMAKE_TOOLCHAIN_FILE=${env:VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
				"-DQt6_DIR=${env:Qt6_DIR}",
				"-DCMAKE_PREFIX_PATH=${env:QT6_PREFIX_PATH}",
				"-DCMAKE_BUILD_TYPE=Release",
				"-DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld",
				"-DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld"
			],
			"group": "build",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Build Release (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"build/win-release"
			],
			"dependsOn": "Configure Release (Windows)",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared"
			}
		},
		{
			"label": "Configure Optimized (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"-S",
				".",
				"-B",
				"build/win-optimized",
				"-G",
				"Ninja",
				"-DCMAKE_CXX_COMPILER=${env:LLVM_ROOT}/bin/clang++.exe",
				"-DCMAKE_CXX_STANDARD=23",
				"-DCMAKE_CXX_STANDARD_REQUIRED=ON",
				"-DCMAKE_CXX_EXTENSIONS=OFF",
				"-DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
				"-DCMAKE_TOOLCHAIN_FILE=${env:VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
				"-DQt6_DIR=${env:Qt6_DIR}",
				"-DCMAKE_PREFIX_PATH=${env:QT6_PREFIX_PATH}",
				"-DCMAKE_BUILD_TYPE=Release",
				"-DGNOTE_ENABLE_IPO=ON",
				"-DCMAKE_INTERPROCEDURAL_OPTIMIZATION=ON",
				"-DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld",
				"-DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld",
				"-DCMAKE_EXE_LINKER_FLAGS_RELEASE=-s",
				"-DCMAKE_SHARED_LINKER_FLAGS_RELEASE=-s",
				"-DCMAKE_CXX_FLAGS_RELEASE=-O3 -DNDEBUG -march=x86-64-v3 -fomit-frame-pointer"
			],
			"group": "build",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Build Optimized (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"build/win-optimized"
			],
			"dependsOn": "Configure Optimized (Windows)",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared"
			}
		},
		{
			"label": "Run GnotePad (Optimized, Windows, No Debugger)",
			"type": "shell",
			"command": "${workspaceFolder}/build/win-optimized/GnotePad.exe",
			"dependsOn": "Build Optimized (Windows)",
			"problemMatcher": [],
			"presentation": {
				"reveal": "silent",
				"panel": "shared"
			}
		},
		// ===== Static Analysis (Linux) =====
		{
			"label": "Clang-Tidy (Debug, Linux)",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"cmake -S . -B build/debug -G Ninja -DCMAKE_CXX_COMPILER=/usr/lib/llvm-21/bin/clang++ -DCMAKE_CXX_STANDARD=23 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake/Qt6 -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld -DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld && cmake --build build/debug --target copy-compile-commands run-clang-tidy"
			],
			"group": "test",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Scan-Build (Debug, Linux)",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"cmake -S . -B build/analyze -G Ninja -DCMAKE_C_COMPILER=/usr/lib/llvm-21/bin/clang -DCMAKE_CXX_COMPILER=/usr/lib/llvm-21/bin/clang++ -DCMAKE_CXX_STANDARD=23 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake/Qt6 -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld -DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld && scan-build -o scan-build-report --status-bugs --use-cc=/usr/lib/llvm-21/bin/clang --use-c++=/usr/lib/llvm-21/bin/clang++ cmake --build build/analyze"
			],
			"group": "test",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Clang-Format (Linux)",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"cmake --build build/debug --target run-clang-format"
			],
			"group": "test",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": true
			}
		},
		// ===== Static Analysis (Windows) =====
		{
			"label": "Configure Clang-Tidy (Debug, Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"-S",
				".",
				"-B",
				"build/win-debug",
				"-G",
				"Ninja",
				"-DCMAKE_CXX_COMPILER=${env:LLVM_ROOT}/bin/clang++.exe",
				"-DCMAKE_CXX_STANDARD=23",
				"-DCMAKE_CXX_STANDARD_REQUIRED=ON",
				"-DCMAKE_CXX_EXTENSIONS=OFF",
				"-DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
				"-DCMAKE_TOOLCHAIN_FILE=${env:VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
				"-DQt6_DIR=${env:Qt6_DIR}",
				"-DCMAKE_PREFIX_PATH=${env:QT6_PREFIX_PATH}",
				"-DCMAKE_BUILD_TYPE=Debug",
				"-DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld",
				"-DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld"
			],
			"group": "test",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Clang-Tidy (Debug, Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"build/win-debug",
				"--target",
				"copy-compile-commands",
				"run-clang-tidy"
			],
			"dependsOn": "Configure Clang-Tidy (Debug, Windows)",
			"group": "test",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared"
			}
		},
		{
			"label": "Configure Scan-Build (Debug, Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"-S",
				".",
				"-B",
				"build/win-analyze",
				"-G",
				"Ninja",
				"-DCMAKE_C_COMPILER=${env:LLVM_ROOT}/bin/clang.exe",
				"-DCMAKE_CXX_COMPILER=${env:LLVM_ROOT}/bin/clang++.exe",
				"-DCMAKE_CXX_STANDARD=23",
				"-DCMAKE_CXX_STANDARD_REQUIRED=ON",
				"-DCMAKE_CXX_EXTENSIONS=OFF",
				"-DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
				"-DCMAKE_TOOLCHAIN_FILE=${env:VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
				"-DQt6_DIR=${env:Qt6_DIR}",
				"-DCMAKE_PREFIX_PATH=${env:QT6_PREFIX_PATH}",
				"-DCMAKE_BUILD_TYPE=Debug",
				"-DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=lld",
				"-DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld"
			],
			"group": "test",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "silent",
				"panel": "shared",
				"clear": true
			}
		},
		{
			"label": "Scan-Build (Debug, Windows)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-Command",
				"& \"${env:LLVM_ROOT}/bin/scan-build.bat\" -o scan-build-report --status-bugs --use-cc=\"${env:LLVM_ROOT}/bin/clang.exe\" --use-c++=\"${env:LLVM_ROOT}/bin/clang++.exe\" cmake --build build/win-analyze"
			],
			"dependsOn": "Configure Scan-Build (Debug, Windows)",
			"group": "test",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared"
			}
		},
		{
			"label": "Clang-Format (Windows)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"build/win-debug",
				"--target",
				"run-clang-format"
			],
			"group": "test",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": true
			}
		},
		// ===== Publish =====
		{
			"label": "Publish (Windows)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-File",
				"tools/publish-win.ps1"
			],
			"dependsOn": "Build Optimized (Windows)",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "dedicated",
				"clear": true
			}
		}
	]
}